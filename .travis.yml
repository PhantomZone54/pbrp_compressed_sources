os: linux
dist: xenial
sudo: required
git:
  depth: 3
addons:
  apt:
    update: true
    packages:
    - git
    - pxz
    - wput
    - tree
before_install: git clone https://github.com/rokibhasansagar/twrp_compressed_sources.git ${TRAVIS_BUILD_DIR}/tranSkadooSH
install: true
script:
  - "travis_wait 30 sleep 1800 &"
  - cd ${TRAVIS_BUILD_DIR}/tranSkadooSH
  - chmod +x ./magic.sh
  - ./magic.sh $RecName $LINK $BRANCH $GitHubMail $GitHubName $FTPHost $FTPUser $FTPPass
after_success: echo "Congratulations! Job Done!"
deploy:
  skip_cleanup: true
  provider: releases
  api_key: "$GitOAUTHToken"
  file_glob: true
  file: ${TRAVIS_BUILD_DIR}/tranSkadooSH/upload/$RecName-$BRANCH*
  on:
    tags: false
    repo: rokibhasansagar/twrp_compressed_sources
    branch: master
branches:
  except:
    - /^(?i:untagged)-.*$/
after_deploy:
  - cd ${TRAVIS_BUILD_DIR}/ && rm -rf tranSkadooSH/
  - echo "Cleanup Done!"
notifications:
  email:
  - rokibhasansagar2014@outlook.com
  webhooks: https://fathomless-fjord-24024.herokuapp.com/notify
